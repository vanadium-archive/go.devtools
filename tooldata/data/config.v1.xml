<?xml version="1.0" ?>
<config>
  <apiCheckProjects>
    <project>release.go.jiri</project>
    <project>release.go.v23</project>
    <project>release.go.x.devtools</project>
    <project>release.go.x.lib</project>
  </apiCheckProjects>
  <copyrightCheckProjects>
    <!-- Each project listed under copyrightCheckProjects should have its own
         separate project item under the top-level config, containing at least
         vanadium-copyright as a test.  Otherwise, the copyright presubmit will
         not run for the project.
     -->
    <project>release.go.jiri</project>
    <project>release.go.v23</project>
    <project>release.go.x.devtools</project>
    <project>release.go.x.jni</project>
    <project>release.go.x.lib</project>
    <project>release.go.x.ref</project>
    <project>release.java</project>
    <project>release.mojo.discovery</project>
    <project>release.mojo.shared</project>
    <project>release.mojo.syncbase</project>
    <project>release.mojo.v23proxy</project>
    <project>release.projects.baku</project>
    <project>release.projects.browser</project>
    <project>release.projects.croupier</project>
    <project>release.projects.madb</project>
    <project>release.projects.physical-lock</project>
    <project>release.projects.playground</project>
    <project>release.projects.reader</project>
    <project>release.projects.sensorlog</project>
    <project>release.projects.syncslides</project>
    <project>website</project>
  </copyrightCheckProjects>
  <goWorkspaces>
    <workspace>infrastructure/go</workspace>
    <workspace>release/go</workspace>
    <workspace>release/projects/go</workspace>
    <workspace>release/projects/physical-lock/go</workspace>
    <workspace>release/projects/sensorlog/go</workspace>
    <workspace>roadmap/go</workspace>
    <workspace>third_party/go</workspace>
  </goWorkspaces>
  <jenkinsMatrixJobs>
    <job arch="false" OS="true" parts="false" showOS="true">third_party-go-build</job>
    <job arch="false" OS="true" parts="false" showOS="true">third_party-go-test</job>
    <job arch="false" OS="true" parts="true"  showOS="false">third_party-go-race</job>
    <job arch="false" OS="true" parts="false" showOS="true">vanadium-android-build</job>
    <job arch="false" OS="true" parts="false" showOS="false">vanadium-bootstrap</job>
    <job arch="true"  OS="true" parts="false" showOS="true">vanadium-go-build</job>
    <job arch="true"  OS="true" parts="false" showOS="true">vanadium-go-test</job>
    <job arch="false" OS="true" parts="true"  showOS="false">vanadium-go-race</job>
    <job arch="false" OS="true" parts="false" showOS="true">vanadium-integration-test</job>
    <job arch="false" OS="true" parts="false" showOS="true">vanadium-java-test</job>
    <job arch="false" OS="true" parts="false" showOS="true">vanadium-website-site</job>
    <job arch="false" OS="true" parts="false" showOS="true">vanadium-website-tutorials-core</job>
    <job arch="false" OS="true" parts="false" showOS="true">vanadium-website-tutorials-external</job>
    <job arch="false" OS="true" parts="false" showOS="true">vanadium-website-tutorials-java</job>
  </jenkinsMatrixJobs>
  <projectTests>
    <project name="release.go.jiri">
      <test>go</test>
      <test>java</test>
      <test>projects</test>
      <test>vanadium-bootstrap</test>
      <test>vanadium-copyright</test>
    </project>
    <project name="release.go.v23">
      <test>go</test>
      <test>java</test>
      <test>mojo</test>
      <test>projects</test>
      <test>vanadium-bootstrap</test>
      <test>vanadium-copyright</test>
    </project>
    <project name="release.go.x.devtools">
      <test>go</test>
      <test>java</test>
      <test>mojo</test>
      <test>projects</test>
      <test>third_party-go</test>
      <test>vanadium-bootstrap</test>
      <test>vanadium-copyright</test>
    </project>
    <project name="release.go.x.jni">
      <test>java</test>
      <test>vanadium-copyright</test>
    </project>
    <project name="release.go.x.lib">
      <test>go</test>
      <test>java</test>
      <test>madb-go-test</test>
      <test>mojo</test>
      <test>projects</test>
      <test>vanadium-bootstrap</test>
      <test>vanadium-copyright</test>
    </project>
    <project name="release.go.x.ref">
      <test>go</test>
      <test>java</test>
      <test>mojo</test>
      <test>projects</test>
      <test>vanadium-bootstrap</test>
      <test>vanadium-copyright</test>
    </project>
    <project name="release.java">
      <test>java</test>
      <test>vanadium-copyright</test>
    </project>
    <project name="release.mojo.discovery">
      <test>mojo</test>
      <test>vanadium-copyright</test>
    </project>
    <project name="release.mojo.shared">
      <test>mojo</test>
      <test>vanadium-copyright</test>
    </project>
    <project name="release.mojo.syncbase">
      <test>mojo</test>
      <test>vanadium-copyright</test>
    </project>
    <project name="release.mojo.v23proxy">
      <test>mojo</test>
      <test>vanadium-copyright</test>
    </project>
    <project name="release.projects.baku">
      <test>vanadium-copyright</test>
      <test>vanadium-baku-test</test>
    </project>
    <project name="release.projects.browser">
      <test>vanadium-copyright</test>
    </project>
    <project name="release.projects.croupier">
      <test>vanadium-copyright</test>
      <test>vanadium-croupier-unit</test>
    </project>
    <project name="release.projects.madb">
      <test>madb-go-format</test>
      <test>madb-go-generate</test>
      <test>madb-go-test</test>
      <test>vanadium-copyright</test>
    </project>
    <project name="release.projects.physical-lock">
      <test>vanadium-copyright</test>
    </project>
    <project name="release.projects.playground">
      <test>vanadium-copyright</test>
      <test>vanadium-playground-test</test>
    </project>
    <project name="release.projects.reader">
      <test>vanadium-copyright</test>
      <!-- TODO(sadovsky,nlacasse): Re-enable this test once the syncbase API change is done.
        <test>vanadium-reader-test</test>
      -->
    </project>
    <project name="release.projects.sensorlog">
      <test>go</test>
      <test>vanadium-copyright</test>
    </project>
    <project name="release.projects.syncslides">
      <test>vanadium-copyright</test>
    </project>
    <project name="third_party">
      <test>go</test>
      <test>projects</test>
      <test>third_party-go</test>
    </project>
    <project name="website">
      <test>vanadium-bootstrap</test>
      <test>vanadium-copyright</test>
      <test>vanadium-website-site</test>
      <test>vanadium-website-tutorials-core</test>
    </project>
  </projectTests>
  <testDependencies>
    <test name="third_party-go-race">
      <dependency>third_party-go-test</dependency>
    </test>
    <test name="third_party-go-test">
      <dependency>third_party-go-build</dependency>
    </test>
    <test name="vanadium-playground-test">
      <dependency>vanadium-go-build</dependency>
    </test>
    <test name="vanadium-go-race">
      <dependency>vanadium-go-test</dependency>
    </test>
    <test name="vanadium-go-test">
      <dependency>vanadium-go-build</dependency>
    </test>
    <test name="vanadium-integration-test">
      <dependency>vanadium-go-build</dependency>
    </test>
  </testDependencies>
  <testGroups>
    <group name="go">
      <test>vanadium-go-api</test>
      <test>vanadium-go-build</test>
      <test>vanadium-go-depcop</test>
      <test>vanadium-go-format</test>
      <test>vanadium-go-generate</test>
      <test>vanadium-go-race</test>
      <test>vanadium-go-test</test>
      <test>vanadium-go-vdl</test>
      <!-- TODO(sjr): figure out what to do with go vet. It currently produces
           false positives which we can't workaround with CLs like
           https://vanadium.googlesource.com/third_party/+/5e07c533eb2dfa525b5d0f3782112a2a5c4b6912,
           because go vet moved back into core go as of Go 1.5.
      <test>vanadium-go-vet</test>
      -->
      <test>vanadium-integration-test</test>
      <test>vanadium-vkube-integration-test</test>
      <test>vanadium-regression-test</test>
      <test>vanadium-prod-services-test</test>
      <test>vanadium-website-tutorials-core</test>
    </group>
    <group name="java">
      <test>baku-android-build</test>
      <test>baku-java-test</test>
      <test>vanadium-android-build</test>
      <test>vanadium-java-test</test>
    </group>
    <group name="mojo">
      <test>vanadium-mojo-discovery-test</test>
      <!-- TODO(sadovsky,nlacasse): Re-enable this test once the syncbase API change is done.
        <test>vanadium-mojo-syncbase-test</test>
      -->
      <test>vanadium-mojo-v23proxy-unit-test</test>
      <!-- NOTE(caprita): this is flaky.  See v.io/i/1226
      <test>vanadium-mojo-v23proxy-integration-test</test>
      -->
    </group>
    <group name="projects">
      <test>vanadium-playground-test</test>
    </group>
    <group name="third_party-go">
      <test>third_party-go-build</test>
      <test>third_party-go-race</test>
      <test>third_party-go-test</test>
    </group>
  </testGroups>
  <testParts>
    <test name="vanadium-go-race">
      <part>v.io/x/ref/services/device/...</part>
      <part>v.io/x/ref/services/agent/...,v.io/x/ref/services/internal/...,v.io/x/ref/services/syncbase/...</part>
      <part>v.io/x/ref/services/...</part>
      <part>v.io/x/ref/runtime/...</part>
      <part>v.io/x/ref/...</part>
      <part>v.io/x/devtools/...</part>
    </test>
    <test name="third_party-go-race">
      <part>golang.org/x/tools/go/ssa/...,golang.org/x/tools/go/pointer/...</part>
      <part>golang.org/x/tools/...</part>
      <part>golang.org/x/crypto/...</part>
    </test>
  </testParts>
  <vdlWorkspaces>
    <workspace>release/go</workspace>
    <workspace>release/projects/physical-lock/go</workspace>
    <workspace>release/projects/sensorlog/go</workspace>
    <workspace>roadmap/go</workspace>
  </vdlWorkspaces>
</config>
